<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W - ç³»ç»ŸçŠ¶æ€</title>
    <style>
        /* 1. å…¨å±€èƒŒæ™¯ */
        body { 
            margin: 0; 
            background: linear-gradient(to top, #f2f2f2 0%, #ffffff 45%, #ffffff 100%); 
            font-family: serif; 
            min-height: 100vh;
        }
        /* 2. å¯¼èˆªæ æ ·å¼ (æ‰€æœ‰é¡µé¢é€šç”¨) */
        .nav-container { 
            position: fixed; 
            bottom: 12px; 
            left: 2%; 
            width: 96%; 
            height: 80px; 
            background: #fff; 
            border-radius: 18px; 
            border: 1px solid #e8e8e8; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 100; 
        }
        .button-group { 
            width: 100%; 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
        }
        .nav-btn { 
            height: 50%; 
            cursor: pointer; 
        }
        .nav-btn img { 
            height: 100%; 
        }
        .active-btn { 
            mix-blend-mode: multiply; 
        }

        /* 3. åŸwé¡µé¢æ ·å¼ */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        .w-body-content {
            background: transparent; 
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", serif;
            color: #000;
            overflow-x: hidden;
            overflow-y: auto;
            padding-bottom: 120px; /* ç»™åº•éƒ¨å¯¼èˆªç•™ç©ºé—´ */
        }

        /* é¡¶éƒ¨é£æ™¯å›¾ï¼šåˆ‡ä¸€åŠæ•ˆæœ */
        .header-banner {
            width: 100%;
            height: 40vh;
            background: url('res/w/header.jpg') no-repeat center center;
            background-size: cover;
            /* ç»™åº•éƒ¨åšä¸€ç‚¹ç‚¹åœ†è§’ï¼Œå¢åŠ ç²¾è‡´æ„Ÿ */
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        /* èµ„æ–™å¡ç‰‡ */
        .profile-container {
            padding: 0 20px;
            margin-top: -50px; /* è®©å¤´åƒå¾€ä¸Šæµ®åŠ¨ä¸€ç‚¹ */
        }

        .avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            border: 4px solid #fff; /* çº¯ç™½æè¾¹ï¼Œéå¸¸å…³é”® */
            background: url('res/w/avatar.jpg') no-repeat center center;
            background-size: cover;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .motto {
            margin: 15px 0 30px 5px;
            font-size: 1.3rem;
            font-weight: 500;
            letter-spacing: 1px;
        }

        /* æ•°æ®è¡Œï¼šæ¨¡ä»¿èµ„æ–™å¡çš„ç²¾è‡´æ„Ÿ */
        .data-card {
            background: rgba(255, 255, 255, 0.9); /* åŠé€æ˜ç™½ï¼Œèƒ½é€å‡ºèƒŒæ™¯æ¸å˜ */
            border-radius: 20px;
            padding: 10px 20px;
            border: 1px solid rgba(0,0,0,0.05);
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .data-card-title {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 12px;
            text-align: center;
            font-weight: 600;
        }

        .data-item {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .data-item:last-child { 
            border-bottom: none; 
        }

        .label { 
            color: #666; 
            font-size: 0.9rem; 
            display: flex;
            align-items: center;
        }
        .value { 
            font-weight: bold; 
            font-family: 'Courier New', Courier, monospace; 
            font-size: 1rem;
        }

        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .status-online {
            background: #27ae60;
        }

        .status-offline {
            background: #e74c3c;
            animation: none;
            opacity: 0.5;
        }

        .status-warning {
            background: #f39c12;
        }

        /* è¿æ¥çŠ¶æ€æ ·å¼ */
        .connection-status {
            display: flex;
            align-items: center;
        }

        .connection-good { color: #27ae60; }
        .connection-fair { color: #f39c12; }
        .connection-poor { color: #e74c3c; }

        /* æ•°æ®åŠ è½½åŠ¨ç”» */
        .loading {
            color: #999 !important;
            font-style: italic;
        }

        .loading::after {
            content: '...';
            animation: loadingDots 1.5s infinite;
        }

        @keyframes loadingDots {
            0%, 20% { content: '.'; }
            40%, 60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        /* çŠ¶æ€æ ‡ç­¾ */
        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 8px;
        }

        .status-tag-good {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
        }

        .status-tag-warning {
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
        }

        .status-tag-poor {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        /* äº‘æœµå›¾æ ‡ */
        .cloud-icon {
            font-size: 0.8em;
            margin-right: 4px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- é¡µé¢å†…å®¹å®¹å™¨ -->
    <div class="w-body-content">
        <div class="header-banner"></div>

        <div class="profile-container">
            <div class="avatar"></div>
            <h2 class="motto">ç¥æˆ‘å¤©å¤©å¼€å¿ƒ</h2>

            <!-- Cloudflare çŠ¶æ€å¡ç‰‡ -->
            <div class="data-card">
                <div class="data-card-title">â˜ï¸ Cloudflare çŠ¶æ€</div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">â˜ï¸</span>è¿è¡ŒçŠ¶æ€
                    </span>
                    <span class="value connection-status">
                        <span class="status-indicator status-online" id="cf-status-indicator"></span>
                        <span id="cf-status-text">æ£€æµ‹ä¸­</span>
                        <span id="cf-status-tag" class="status-tag status-tag-good" style="display:none;">åœ¨çº¿</span>
                    </span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸŒ</span>CDN èŠ‚ç‚¹
                    </span>
                    <span class="value" id="cf-colo">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">âš¡</span>è¾¹ç¼˜ç¼“å­˜
                    </span>
                    <span class="value" id="cf-cache-status">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ›¡ï¸</span>å®‰å…¨é˜²æŠ¤
                    </span>
                    <span class="value" id="cf-security">æ£€æµ‹ä¸­...</span>
                </div>
            </div>

            <!-- ç³»ç»Ÿæ€§èƒ½å¡ç‰‡ -->
            <div class="data-card">
                <div class="data-card-title">ğŸ“Š æ€§èƒ½æ•°æ®</div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ“…</span>è¿è¡Œå¤©æ•°
                    </span>
                    <span class="value" id="days">Counting...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">â±ï¸</span>é¡µé¢åŠ è½½
                    </span>
                    <span class="value" id="page-load">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ“ˆ</span>æ€§èƒ½è¯„åˆ†
                    </span>
                    <span class="value" id="performance-score">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ”—</span>ç½‘ç»œå»¶è¿Ÿ
                    </span>
                    <span class="value connection-status" id="network-ping">
                        <span>æ£€æµ‹ä¸­...</span>
                    </span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ’¾</span>æµè§ˆå™¨å†…å­˜
                    </span>
                    <span class="value" id="browser-memory">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">
                        <span class="cloud-icon">ğŸ”„</span>è¯·æ±‚çŠ¶æ€
                    </span>
                    <span class="value" id="request-status">ç­‰å¾…ä¸­...</span>
                </div>
            </div>

            <!-- æ‰©å±•ä¿¡æ¯ -->
            <div class="data-card">
                <div class="data-card-title">ğŸ” è¯¦ç»†ä¿¡æ¯</div>
                <div class="data-item">
                    <span class="label">User Agent</span>
                    <span class="value" id="user-agent" style="font-size:0.8rem;max-width:60%;text-align:right;word-break:break-all;"></span>
                </div>
                <div class="data-item">
                    <span class="label">æ—¶åŒº</span>
                    <span class="value" id="timezone">æ£€æµ‹ä¸­...</span>
                </div>
                <div class="data-item">
                    <span class="label">æœ€åæ›´æ–°</span>
                    <span class="value" id="last-update">--:--:--</span>
                </div>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <div class="nav-container">
        <div class="button-group">
            <div class="nav-btn" onclick="location.href='index.html'"><img src="res/button/No/home.jpg"></div>
            <div class="nav-btn" onclick="location.href='study.html'"><img src="res/button/No/Study.jpg"></div>
            <div class="nav-btn" onclick="location.href='diary.html'"><img src="res/button/No/diary.jpg"></div>
            <div class="nav-btn" onclick="location.href='w.html'"><img src="res/button/yes/w.jpg" class="active-btn"></div>
        </div>
    </div>

    <script>
        // Cloudflare çŠ¶æ€æ£€æµ‹ç±»
        class CloudflareMonitor {
            constructor() {
                this.cfData = {};
                this.isCF = false;
                this.lastUpdate = new Date();
            }

            // æ£€æµ‹æ˜¯å¦åœ¨Cloudflareä¸Šè¿è¡Œ
            async detectCloudflare() {
                try {
                    // æ–¹æ³•1ï¼šæ£€æŸ¥CF-RAYå¤´ï¼ˆæœ€å¯é ï¼‰
                    const response = await fetch(window.location.href, {
                        method: 'HEAD',
                        cache: 'no-store'
                    });
                    
                    const cfRay = response.headers.get('cf-ray');
                    const cfWorker = response.headers.get('cf-worker');
                    const cfCache = response.headers.get('cf-cache-status');
                    const cfColo = response.headers.get('cf-colo') || response.headers.get('cf-iata');
                    
                    this.isCF = !!cfRay;
                    
                    if (this.isCF) {
                        this.cfData = {
                            rayId: cfRay,
                            worker: cfWorker || 'æ— ',
                            cacheStatus: cfCache || 'æœªçŸ¥',
                            colo: cfColo || 'æœªçŸ¥',
                            ipCountry: response.headers.get('cf-ipcountry') || 'æœªçŸ¥',
                            securityLevel: response.headers.get('cf-threat-score') || 'å®‰å…¨'
                        };
                        
                        console.log('âœ… æ£€æµ‹åˆ°Cloudflare:', this.cfData);
                        return true;
                    }
                } catch (error) {
                    console.log('Cloudflareæ£€æµ‹å¤±è´¥:', error);
                }
                
                // æ–¹æ³•2ï¼šæ£€æŸ¥windowå¯¹è±¡ï¼ˆå¦‚æœä½¿ç”¨Cloudflare Workersï¼‰
                if (typeof window !== 'undefined' && window.location) {
                    const hostname = window.location.hostname;
                    if (hostname.endsWith('.workers.dev') || 
                        hostname.endsWith('.pages.dev') ||
                        hostname.includes('cloudflare')) {
                        this.isCF = true;
                        this.cfData = {
                            colo: 'Cloudflare',
                            cacheStatus: 'é¡µé¢åº”ç”¨',
                            securityLevel: 'å·²å¯ç”¨'
                        };
                        return true;
                    }
                }
                
                return false;
            }

            // è·å–CloudflareçŠ¶æ€
            async getCloudflareStatus() {
                if (!this.isCF) {
                    return {
                        online: false,
                        message: 'æœªåœ¨Cloudflareä¸Šè¿è¡Œ'
                    };
                }

                try {
                    // å°è¯•è·å–Cloudflare APIçŠ¶æ€ï¼ˆå…¬å¼€APIï¼‰
                    const apiResponse = await fetch('https://www.cloudflarestatus.com/api/v2/status.json', {
                        cache: 'no-store'
                    });
                    
                    if (apiResponse.ok) {
                        const statusData = await apiResponse.json();
                        return {
                            online: statusData.status.indicator === 'none',
                            status: statusData.status.description,
                            indicator: statusData.status.indicator
                        };
                    }
                } catch (error) {
                    // å¦‚æœAPIä¸å¯ç”¨ï¼Œä½¿ç”¨åŸºäºHEADè¯·æ±‚çš„æ£€æµ‹
                    try {
                        const startTime = performance.now();
                        const response = await fetch(window.location.href, {
                            method: 'HEAD',
                            cache: 'no-store',
                            headers: {
                                'Cache-Control': 'no-cache'
                            }
                        });
                        const endTime = performance.now();
                        
                        const latency = Math.round(endTime - startTime);
                        
                        return {
                            online: response.ok,
                            latency: latency,
                            status: response.ok ? 'åœ¨çº¿' : 'å¼‚å¸¸',
                            colo: response.headers.get('cf-colo') || 'æœªçŸ¥'
                        };
                    } catch (fetchError) {
                        return {
                            online: false,
                            message: 'è¿æ¥å¤±è´¥'
                        };
                    }
                }
            }

            // è·å–ç¼“å­˜çŠ¶æ€
            getCacheStatus() {
                if (!this.isCF) return 'æœªç¼“å­˜';
                
                const status = this.cfData.cacheStatus;
                const cacheMap = {
                    'HIT': 'âœ… ç¼“å­˜å‘½ä¸­',
                    'MISS': 'ğŸ”„ ç¼“å­˜æœªå‘½ä¸­',
                    'EXPIRED': 'ğŸ”„ ç¼“å­˜è¿‡æœŸ',
                    'STALE': 'ğŸ”„ ç¼“å­˜é™ˆæ—§',
                    'BYPASS': 'ğŸ”„ ç»•è¿‡ç¼“å­˜',
                    'DYNAMIC': 'âš¡ åŠ¨æ€å†…å®¹'
                };
                
                return cacheMap[status] || status || 'æœªçŸ¥';
            }

            // è·å–å®‰å…¨çŠ¶æ€
            getSecurityStatus() {
                if (!this.isCF) return 'æœªå—ä¿æŠ¤';
                
                const threatScore = this.cfData.securityLevel;
                if (threatScore === '0' || threatScore === 'å®‰å…¨') {
                    return 'âœ… å®‰å…¨';
                } else if (threatScore && !isNaN(threatScore)) {
                    const score = parseInt(threatScore);
                    if (score < 10) return 'âœ… ä½é£é™©';
                    if (score < 30) return 'âš ï¸ ä¸­é£é™©';
                    return 'âŒ é«˜é£é™©';
                }
                
                return 'ğŸ›¡ï¸ å·²ä¿æŠ¤';
            }

            // è·å–èŠ‚ç‚¹ä¿¡æ¯
            getColoInfo() {
                if (!this.isCF) return 'æœ¬åœ°';
                
                const colo = this.cfData.colo;
                const coloMap = {
                    'HKG': 'ğŸ‡­ğŸ‡° é¦™æ¸¯',
                    'SIN': 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡',
                    'TYO': 'ğŸ‡¯ğŸ‡µ ä¸œäº¬',
                    'ICN': 'ğŸ‡°ğŸ‡· é¦–å°”',
                    'LAX': 'ğŸ‡ºğŸ‡¸ æ´›æ‰çŸ¶',
                    'SFO': 'ğŸ‡ºğŸ‡¸ æ—§é‡‘å±±',
                    'DFW': 'ğŸ‡ºğŸ‡¸ è¾¾æ‹‰æ–¯',
                    'ORD': 'ğŸ‡ºğŸ‡¸ èŠåŠ å“¥',
                    'LHR': 'ğŸ‡¬ğŸ‡§ ä¼¦æ•¦',
                    'FRA': 'ğŸ‡©ğŸ‡ª æ³•å…°å…‹ç¦',
                    'AMS': 'ğŸ‡³ğŸ‡± é˜¿å§†æ–¯ç‰¹ä¸¹',
                    'SYD': 'ğŸ‡¦ğŸ‡º æ‚‰å°¼'
                };
                
                return coloMap[colo] || colo || 'æœªçŸ¥';
            }
        }

        // ç³»ç»Ÿæ€§èƒ½ç›‘æ§ç±»
        class SystemMonitor {
            constructor() {
                this.metrics = {};
                this.cfMonitor = new CloudflareMonitor();
            }

            // åˆå§‹åŒ–
            async initialize() {
                // åŸºç¡€ä¿¡æ¯
                this.updateBasicInfo();
                
                // æ£€æµ‹Cloudflare
                const isCF = await this.cfMonitor.detectCloudflare();
                document.getElementById('cf-cache-status').textContent = 
                    isCF ? 'æ£€æµ‹ä¸­...' : 'æœªä½¿ç”¨Cloudflare';
                
                // æ›´æ–°æ‰€æœ‰æ•°æ®
                await this.updateAllMetrics();
                
                // è®¾ç½®å®šæ—¶æ›´æ–°
                this.setupAutoUpdate();
            }

            // æ›´æ–°åŸºç¡€ä¿¡æ¯
            updateBasicInfo() {
                // è¿è¡Œå¤©æ•°
                const start = new Date('2026-02-01');
                const now = new Date();
                document.getElementById('days').textContent = 
                    Math.floor((now - start) / (1000*60*60*24)) + ' å¤©';
                
                // User Agent
                document.getElementById('user-agent').textContent = 
                    navigator.userAgent.substring(0, 50) + '...';
                
                // æ—¶åŒº
                document.getElementById('timezone').textContent = 
                    Intl.DateTimeFormat().resolvedOptions().timeZone;
            }

            // æ›´æ–°é¡µé¢æ€§èƒ½
            updatePagePerformance() {
                if (window.performance && performance.timing) {
                    const timing = performance.timing;
                    
                    // é¡µé¢åŠ è½½æ—¶é—´
                    const loadTime = timing.loadEventEnd - timing.navigationStart;
                    document.getElementById('page-load').textContent = 
                        loadTime > 0 ? `${Math.round(loadTime)}ms` : 'è®¡ç®—ä¸­...';
                    
                    // æ€§èƒ½è¯„åˆ†ï¼ˆåŸºäºåŠ è½½æ—¶é—´ï¼‰
                    let score = 100;
                    if (loadTime > 3000) score = 60;
                    else if (loadTime > 2000) score = 70;
                    else if (loadTime > 1000) score = 80;
                    else if (loadTime > 500) score = 90;
                    
                    const scoreElement = document.getElementById('performance-score');
                    scoreElement.textContent = `${score}/100`;
                    scoreElement.className = `value ${
                        score >= 90 ? 'connection-good' : 
                        score >= 70 ? 'connection-fair' : 
                        'connection-poor'
                    }`;
                }
            }

            // æ›´æ–°ç½‘ç»œå»¶è¿Ÿ
            async updateNetworkPing() {
                try {
                    const startTime = performance.now();
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 3000);
                    
                    await fetch('https://1.1.1.1/cdn-cgi/trace', {
                        method: 'GET',
                        cache: 'no-store',
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    const endTime = performance.now();
                    const ping = Math.round(endTime - startTime);
                    
                    const pingElement = document.getElementById('network-ping');
                    pingElement.innerHTML = `<span>${ping}ms</span>`;
                    pingElement.className = `value connection-status ${
                        ping < 100 ? 'connection-good' : 
                        ping < 300 ? 'connection-fair' : 
                        'connection-poor'
                    }`;
                    
                } catch (error) {
                    document.getElementById('network-ping').innerHTML = 
                        '<span>è¶…æ—¶</span>';
                    document.getElementById('network-ping').className = 
                        'value connection-status connection-poor';
                }
            }

            // æ›´æ–°æµè§ˆå™¨å†…å­˜
            updateBrowserMemory() {
                if (performance && performance.memory) {
                    const memory = performance.memory;
                    const usedMB = Math.round(memory.usedJSHeapSize / (1024 * 1024));
                    const totalMB = Math.round(memory.totalJSHeapSize / (1024 * 1024));
                    const percent = Math.round((usedMB / totalMB) * 100);
                    
                    document.getElementById('browser-memory').textContent = 
                        `${usedMB}MB (${percent}%)`;
                    
                    return { usedMB, totalMB, percent };
                }
                return null;
            }

            // æ›´æ–°CloudflareçŠ¶æ€
            async updateCloudflareStatus() {
                const cfStatus = await this.cfMonitor.getCloudflareStatus();
                const statusIndicator = document.getElementById('cf-status-indicator');
                const statusText = document.getElementById('cf-status-text');
                const statusTag = document.getElementById('cf-status-tag');
                
                if (cfStatus.online) {
                    statusIndicator.className = 'status-indicator status-online';
                    statusText.textContent = cfStatus.status || 'åœ¨çº¿';
                    statusTag.className = 'status-tag status-tag-good';
                    statusTag.textContent = 'æ­£å¸¸';
                    statusTag.style.display = 'inline-block';
                } else {
                    statusIndicator.className = 'status-indicator status-offline';
                    statusText.textContent = cfStatus.message || 'ç¦»çº¿';
                    statusTag.className = 'status-tag status-tag-poor';
                    statusTag.textContent = 'å¼‚å¸¸';
                    statusTag.style.display = 'inline-block';
                }
                
                // æ›´æ–°å…¶ä»–Cloudflareä¿¡æ¯
                document.getElementById('cf-cache-status').textContent = 
                    this.cfMonitor.getCacheStatus();
                document.getElementById('cf-security').textContent = 
                    this.cfMonitor.getSecurityStatus();
                document.getElementById('cf-colo').textContent = 
                    this.cfMonitor.getColoInfo();
            }

            // æ›´æ–°è¯·æ±‚çŠ¶æ€
            updateRequestStatus() {
                const now = new Date();
                const hour = now.getHours();
                const minute = now.getMinutes();
                
                let status = 'æ­£å¸¸';
                let className = 'connection-good';
                
                // æ¨¡æ‹Ÿè¯·æ±‚çŠ¶æ€ï¼ˆå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
                if (minute % 15 === 0) {
                    status = 'é«˜å³°æœŸ';
                    className = 'connection-fair';
                } else if (minute % 30 === 0) {
                    status = 'ä½è´Ÿè½½';
                    className = 'connection-good';
                }
                
                document.getElementById('request-status').textContent = status;
                document.getElementById('request-status').className = `value ${className}`;
            }

            // æ›´æ–°æ‰€æœ‰æŒ‡æ ‡
            async updateAllMetrics() {
                try {
                    // æ›´æ–°åŸºç¡€ä¿¡æ¯
                    this.updateBasicInfo();
                    
                    // æ›´æ–°é¡µé¢æ€§èƒ½
                    this.updatePagePerformance();
                    
                    // æ›´æ–°ç½‘ç»œå»¶è¿Ÿ
                    await this.updateNetworkPing();
                    
                    // æ›´æ–°æµè§ˆå™¨å†…å­˜
                    this.updateBrowserMemory();
                    
                    // æ›´æ–°CloudflareçŠ¶æ€
                    await this.updateCloudflareStatus();
                    
                    // æ›´æ–°è¯·æ±‚çŠ¶æ€
                    this.updateRequestStatus();
                    
                    // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
                    const now = new Date();
                    document.getElementById('last-update').textContent = 
                        now.toLocaleTimeString('zh-CN');
                    
                } catch (error) {
                    console.error('æ›´æ–°æŒ‡æ ‡å¤±è´¥:', error);
                }
            }

            // è®¾ç½®è‡ªåŠ¨æ›´æ–°
            setupAutoUpdate() {
                // åˆå§‹æ›´æ–°
                this.updateAllMetrics();
                
                // æ¯30ç§’æ›´æ–°ä¸€æ¬¡æ€§èƒ½æ•°æ®
                setInterval(() => {
                    this.updateAllMetrics();
                }, 30000);
                
                // æ¯5ç§’æ›´æ–°ä¸€æ¬¡å†…å­˜å’Œè¯·æ±‚çŠ¶æ€ï¼ˆè½»é‡æ›´æ–°ï¼‰
                setInterval(() => {
                    this.updateBrowserMemory();
                    this.updateRequestStatus();
                    
                    // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
                    const now = new Date();
                    document.getElementById('last-update').textContent = 
                        now.toLocaleTimeString('zh-CN');
                }, 5000);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            const monitor = new SystemMonitor();
            monitor.initialize();
            
            // ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    monitor.updateAllMetrics();
                }
            });
            
            // ç›‘å¬çª—å£èšç„¦
            window.addEventListener('focus', () => {
                monitor.updateAllMetrics();
            });
        });
    </script>
</body>
</html>
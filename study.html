<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯’å‡è®¡åˆ’</title>
    <style>
        /* 1. å…¨å±€èƒŒæ™¯ */
        body { 
            margin: 0; 
            background: linear-gradient(to top, #f2f2f2 0%, #ffffff 45%, #ffffff 100%); 
            font-family: serif; 
            min-height: 100vh;
        }
        /* 2. å¯¼èˆªæ æ ·å¼ (æ‰€æœ‰é¡µé¢é€šç”¨) */
        .nav-container { 
            position: fixed; 
            bottom: 12px; 
            left: 2%; 
            width: 96%; 
            height: 80px; 
            background: #fff; 
            border-radius: 18px; 
            border: 1px solid #e8e8e8; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 100; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .button-group { 
            width: 100%; 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            max-width:600px;
        }
        .nav-btn { 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer; 
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.2s ease;
            min-width: 60px;
        }
        .nav-btn:hover {
            background: rgba(0,0,0,0.03);
        }
        .nav-btn.active {
            background: rgba(43, 43, 255, 0.1);
        }
        .nav-btn .emoji {
            font-size: 24px;
            margin-bottom: 4px;
        }
        .nav-btn .text {
            font-size: 12px;
            font-weight: 500;
            color: #333;
        }
        .nav-btn.active .text {
            color: #2b2bff;
            font-weight: 600;
        }

        /* 3. åŸstudyé¡µé¢æ ·å¼ */
        :root { 
            --primary: #2c3e50; 
            --accent: #e74c3c; 
            --success: #27ae60; 
            --bg: #f4f7f9; 
        }
        .study-body-content {
            font-family: -apple-system, sans-serif; 
            background: transparent;
            margin: 0; 
            padding: 10px;
            padding-bottom: 100px; /* ç»™åº•éƒ¨å¯¼èˆªç•™ç©ºé—´ */
            font-size: 14px; 
        }
        .container { 
            max-width: 480px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 12px; 
            padding: 15px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); 
        }
        
        h2 { 
            font-size: 1.3em; 
            margin: 0 0 5px; 
            text-align: center; 
            color: var(--primary); 
        }
        .subtitle { 
            font-size: 0.8em; 
            color: #888; 
            text-align: center; 
            margin-bottom: 15px; 
        }

        /* éšæœºçµæ„ŸåŒº */
        .random-box { 
            background: #fff5f5; 
            border: 1px solid #ffe3e3; 
            padding: 12px; 
            border-radius: 8px; 
            text-align: center; 
            margin-bottom: 15px; 
        }
        #suggestion { 
            font-weight: bold; 
            color: var(--accent); 
            margin-bottom: 8px; 
            min-height: 1.4em; 
        }
        .btn-pick { 
            background: var(--accent); 
            color: white; 
            border: none; 
            padding: 6px 16px; 
            border-radius: 20px; 
            font-size: 0.9em; 
            cursor: pointer; 
            font-weight: bold; 
        }

        /* ä»»åŠ¡åˆ—è¡¨ */
        .section-header { 
            font-size: 0.95em; 
            font-weight: bold; 
            color: #555; 
            margin: 15px 0 8px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        .task-group { 
            border: 1px solid #eee; 
            border-radius: 8px; 
            overflow: hidden; 
            margin-bottom: 10px; 
        }
        
        .task-row { 
            border-bottom: 1px solid #f2f2f2; 
        }
        .task-row:last-child { 
            border-bottom: none; 
        }
        
        .task-main { 
            display: flex; 
            align-items: center; 
            padding: 10px; 
            cursor: pointer; 
        }
        .task-main:hover { 
            background: #f9f9f9; 
        }
        
        /* æ‰“å¡æ¡† */
        .check-box { 
            width: 20px; 
            height: 20px; 
            border: 2px solid #ccc; 
            border-radius: 4px; 
            margin-right: 12px; 
            flex-shrink: 0; 
            position: relative; 
            transition: 0.2s; 
        }
        .task-row.done .check-box { 
            background: var(--success); 
            border-color: var(--success); 
        }
        .task-row.done .check-box::after { 
            content: 'âœ“'; 
            color: white; 
            position: absolute; 
            left: 4px; 
            top: -2px; 
            font-size: 14px; 
            font-weight: bold; 
        }
        
        /* ä»»åŠ¡æ–‡å­— */
        .task-text { 
            flex-grow: 1; 
            color: #333; 
            font-weight: 500; 
        }
        .task-row.done .task-text { 
            text-decoration: line-through; 
            color: #aaa !important; 
        }
        .time-tag { 
            font-size: 0.8em; 
            color: #999; 
            margin-left: 8px; 
        }

        /* è¯¦æƒ…åŒº */
        .task-detail { 
            display: none; 
            padding: 10px 15px 12px 42px; 
            background: #f8faff; 
            font-size: 0.85em; 
            color: #666; 
            line-height: 1.5; 
            border-top: 1px solid #edf2f7; 
        }
        .task-detail.active { 
            display: block; 
        }
        .task-detail b { 
            color: var(--primary); 
        }

        /* å¤ç›˜ç‰¹æ®Šæ ·å¼ */
        .review-row { 
            border-left: 4px solid var(--accent); 
        }

        .footer { 
            margin-top: 20px; 
            text-align: center; 
            font-size: 0.8em; 
            color: #999; 
            padding-top: 10px; 
            border-top: 1px solid #eee; 
        }
        .btn-reset { 
            color: #999; 
            border: none; 
            background: none; 
            text-decoration: underline; 
            cursor: pointer; 
            padding: 10px; 
        }
    </style>
</head>
<body>
    <!-- é¡µé¢å†…å®¹å®¹å™¨ -->
    <div class="study-body-content">
        <div class="container">
            <h2>ğŸ¯ å¯’å‡è®¡åˆ’</h2>
            <div class="subtitle">æ‰“å¡ | PDF è¯¦æƒ… | æ¯æ—¥å¤ç›˜</div>

            <div class="random-box">
                <div id="suggestion">ä¸çŸ¥é“å…ˆåšå“ªé¡¹ï¼Ÿ</div>
                <button class="btn-pick" onclick="pickRandom()">ğŸ² å¸®æˆ‘é€‰ä¸€é¡¹é€‰åšä»»åŠ¡</button>
            </div>

            <div class="section-header" style="color: var(--accent);">ğŸ“… æ¯æ—¥å¿…åš (æ¯å¤©è‡ªåŠ¨é‡ç½®)</div>
            <div class="task-group" id="must-list"></div>

            <div class="section-header"><span>ğŸ† å‘¨æœŸé€‰åšæ±  (æ‰‹åŠ¨é‡ç½®)</span> <span id="pool-progress">0/13</span></div>
            <div class="task-group" id="pool-list"></div>

            <div class="footer">
                <div>å‘¨ä¸€è‡³å‘¨æ—¥å…¨åŠ›è¿è¡Œ</div>
                <button class="btn-reset" onclick="resetPool()">é‡ç½® 8 å¤©å‘¨æœŸé€‰åšè¿›åº¦</button>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <div class="nav-container">
        <div class="button-group">
            <div class="nav-btn" onclick="location.href='index.html'">
                <div class="emoji">ğŸ </div>
                <div class="text">ä¸»é¡µ</div>
            </div>
            <div class="nav-btn active" onclick="location.href='study.html'">
                <div class="emoji">ğŸ“š</div>
                <div class="text">å­¦ä¹ </div>
            </div>
            <div class="nav-btn" onclick="location.href='diary.html'">
                <div class="emoji">ğŸ““</div>
                <div class="text">æ—¥è®°</div>
            </div>
            <div class="nav-btn" onclick="location.href='w.html'">
                <div class="emoji">âš™ï¸</div>
                <div class="text">çŠ¶æ€</div>
            </div>
        </div>
    </div>

    <script>
        // æ¯æ—¥ä»»åŠ¡
        const mustTasks = [
            { id: 'm1', cat: "è¯­", name: "èƒŒå¤è¯—/æ–‡è¨€æ–‡", time: "30m", detail: "<b>PDFè¦æ±‚ï¼š</b>æœ€å¥½åœ¨æ—©æ™¨ã€‚èƒŒè¯µå¹¶ç¡®ä¿èƒ½é»˜å†™æ ¸å¿ƒå¥å­ã€‚" },
            { id: 'm2', cat: "è‹±", name: "èƒŒå•è¯(å…­å¹´çº§èµ·)", time: "40m", detail: "<b>PDFè¦æ±‚ï¼š</b>æŒ‰æ•™æé¡ºåºï¼Œæ³¨æ„å•è¯æ‹¼å†™å’Œåœ¨æ–‡ä¸­çš„åº”ç”¨ã€‚" },
            { id: 'm3', cat: "è€ƒ", name: "ğŸŒ™ æ™šé—´å°å¤ç›˜", time: "10m", isReview: true, detail: "<b>å¤ç›˜å†…å®¹ï¼š</b><br>1. æ£€æŸ¥ä»Šæ—¥æ‰€æœ‰ã€æœ€ä¼˜è§£ã€‘äº¤æµæ˜¯å¦å®Œæˆï¼Ÿ<br>2. è®°å½•ä¸€ä¸ªæœ€æœ‰æˆå°±æ„Ÿçš„çŸ¥è¯†ç‚¹ã€‚<br>3. ç¡®å®šæ˜æ—©æœ€å…ˆè§£å†³çš„ä»»åŠ¡ã€‚" }
        ];

        // é€‰åšæ± 
        const poolTasks = [
            { id: 1, cat: "æ•°", name: "æ•°å­¦å¤ä¹ ç»ƒä¹ +AIäº¤æµ", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>90mæ¨¡è€ƒ+30mæ‰¹æ”¹ã€‚<b>å…³é”®ï¼š</b>ä¸è®ºå¯¹é”™éƒ½è¦é—®AIæœ€ä¼˜è§£æ–¹æ¡ˆï¼Œå¯¹æ¯”æ€è·¯ã€‚" },
            { id: 2, cat: "æ•°", name: "æ•°å­¦é¢„ä¹ æ–°è¯¾+AIäº¤æµ", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>çœ‹å½•æ’­å¹¶åšé¢˜ã€‚åŒæ ·è¦æ±‚ä¸AIæ·±å…¥æ¢è®¨ï¼Œå¯»æ‰¾è§£é¢˜æœ€ä¼˜åˆ‡å…¥ç‚¹ã€‚" },
            { id: 3, cat: "è¯­", name: "å†™ä½œæ–‡+AIäºŒæ¬¡ä¿®æ”¹", time: "90m", detail: "<b>PDFæ”»ç•¥ï¼š</b>60må†™+30mæ”¹ã€‚å†™å‰çœ‹æ•™å­¦ï¼Œå†™åè®©AIåˆ†æä¸è¶³ï¼Œå¿…é¡»å®Œæˆ<b>äºŒæ¬¡ä¿®æ”¹</b>ã€‚" },
            { id: 4, cat: "è¯­", name: "è¯­æ–‡åšé¢˜æ–¹æ³•ç»ƒä¹ ", time: "50m", detail: "<b>PDFæ”»ç•¥ï¼š</b>çœ‹è§†é¢‘æˆ–é—®AIé¢˜å‹å¥—è·¯ï¼Œé’ˆå¯¹å¼±é¡¹è¿›è¡Œä¸“é¡¹çˆ†ç ´ã€‚" },
            { id: 5, cat: "è‹±", name: "è‹±è¯­è¯­æ³•å½•æ’­+ç»ƒä¹ ", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>çœ‹æ™“ç‡•è¯­æ³•è¯¾ï¼Œå¿…é¡»åŒæ­¥å®Œæˆé…å¥—ç»ƒä¹ ï¼Œä¸è¦åªå¬ä¸ç»ƒã€‚" },
            { id: 6, cat: "è‹±", name: "è‹±è¯­è¯¾å¤–ç»ƒä¹ (æ™“ç‡•)", time: "40m", detail: "<b>PDFæ”»ç•¥ï¼š</b>é’ˆå¯¹æ€§å®Œæˆæ™“ç‡•ä¹¦é‡Œçš„è¿›é˜¶ç»ƒä¹ ã€‚" },
            { id: 7, cat: "è‹±", name: "è‹±è¯­é˜…è¯»ç†è§£ç»ƒä¹ ä¹¦", time: "40m", detail: "<b>PDFæ”»ç•¥ï¼š</b>é™æ—¶é˜…è¯»ï¼Œæ ‡æ³¨ç”Ÿè¯ï¼Œé”»ç‚¼è¯­æ„Ÿã€‚" },
            { id: 8, cat: "è‹±", name: "è‹±è¯­åšé¢˜æ–¹æ³•å½•æ’­+ç»ƒä¹ ", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>å­¦ä¹ å½•æ’­ä¸­çš„è§£é¢˜æŠ€å·§ï¼Œå¹¶åœ¨åŒæ­¥ç»ƒä¹ ä¸­åº”ç”¨ã€‚" },
            { id: 9, cat: "è‹±", name: "è‹±è¯­é˜…è¯»ç†è§£å½•æ’­+ç»ƒä¹ ", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>æ·±åº¦è§£å‰–æ–‡ç« ç»“æ„ï¼Œè·Ÿå½•æ’­è¯¾åŒæ­¥åšç²¾è¯»ã€‚" },
            { id: 10, cat: "ç‰©", name: "ç‰©ç†å…«ä¸Šç†è§£+AIæŠ½é—®", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>çœ‹å½•æ’­ã€‚å¯¹æ¨¡ç³Šç‚¹å¤è¿°ç»™AIå¬ï¼Œå¹¶è®©AIè¿›è¡Œ<b>æ¨¡æ‹ŸæŠ½é—®</b>ã€‚" },
            { id: 11, cat: "ç‰©", name: "ç‰©ç†å…«ä¸‹ç†è§£+AIæŠ½é—®", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>åŒä¸Šï¼Œé‡ç‚¹åœ¨ç†è§£ç‰©ç†é€»è¾‘è€ŒéèƒŒå…¬å¼ã€‚" },
            { id: 12, cat: "åŒ–", name: "åŒ–å­¦å…«ä¸Šç†è§£+AIæŠ½é—®", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>çœ‹å½•æ’­ã€‚å‘AIè½¬è¿°å®éªŒæ€§è´¨ï¼Œè®©AIçº é”™å¹¶è¿›è¡ŒéšæœºæŠ½é—®ã€‚" },
            { id: 13, cat: "åŒ–", name: "åŒ–å­¦å…«ä¸‹ç†è§£+AIæŠ½é—®", time: "120m", detail: "<b>PDFæ”»ç•¥ï¼š</b>åŒä¸Šï¼Œåˆ©ç”¨AIæ¨¡æ‹ŸçœŸå®è€ƒæŸ¥åœºæ™¯ã€‚" }
        ];

        function init() {
            const today = new Date().toDateString();
            if (localStorage.getItem('last_visit') !== today) {
                localStorage.setItem('daily_status', '[]');
                localStorage.setItem('last_visit', today);
            }
            render();
        }

        function render() {
            const dDone = JSON.parse(localStorage.getItem('daily_status') || '[]');
            const pDone = JSON.parse(localStorage.getItem('pool_status') || '[]');

            const buildList = (data, storageArr, type) => {
                return data.map(t => `
                    <div class="task-row ${storageArr.includes(t.id)?'done':''} ${t.isReview?'review-row':''}">
                        <div class="task-main" onclick="toggleDetail('${type}-${t.id}')">
                            <div class="check-box" onclick="event.stopPropagation(); toggleTask('${t.id}', '${type}', ${t.isReview})"></div>
                            <div class="task-text">
                                [${t.cat}] ${t.name} <span class="time-tag">${t.time}</span>
                            </div>
                        </div>
                        <div id="detail-${type}-${t.id}" class="task-detail">${t.detail}</div>
                    </div>
                `).join('');
            };

            document.getElementById('must-list').innerHTML = buildList(mustTasks, dDone, 'must');
            document.getElementById('pool-list').innerHTML = buildList(poolTasks, pDone, 'pool');
            document.getElementById('pool-progress').innerText = `${pDone.length}/${poolTasks.length}`;
        }

        function toggleDetail(uid) {
            const target = document.getElementById('detail-' + uid);
            const isOpen = target.classList.contains('active');
            document.querySelectorAll('.task-detail').forEach(d => d.classList.remove('active'));
            if (!isOpen) target.classList.add('active');
        }

        function toggleTask(id, type, isReview) {
            let key = type === 'must' ? 'daily_status' : 'pool_status';
            let done = JSON.parse(localStorage.getItem(key) || '[]');
            
            if (isReview && !done.includes(id)) {
                const notes = prompt("è¯·è¾“å…¥ä»Šæ™šå¤ç›˜å¿ƒå¾—ï¼ˆæˆ–ä¸€ä¸ªä»Šå¤©ææ‡‚çš„é‡ç‚¹ï¼‰ï¼š");
                if (!notes) return;
            }

            done = done.includes(id) ? done.filter(i => i != id) : [...done, id];
            localStorage.setItem(key, JSON.stringify(done));
            render();
        }

        function pickRandom() {
            const pDone = JSON.parse(localStorage.getItem('pool_status') || '[]');
            const left = poolTasks.filter(t => !pDone.includes(t.id));
            if (left.length === 0) {
                document.getElementById('suggestion').innerText = "ä»»åŠ¡æ± å·²ç©ºï¼å…¨åšå®Œå•¦ğŸš€";
                return;
            }
            const lucky = left[Math.floor(Math.random() * left.length)];
            document.getElementById('suggestion').innerText = `ğŸ’¡ æŠ½åˆ°ï¼š[${lucky.cat}] ${lucky.name}`;
        }

        function resetPool() {
            if(confirm("ç¡®å®šé‡ç½® 8 å¤©å‘¨æœŸçš„é€‰åšè¿›åº¦å—ï¼Ÿ")) {
                localStorage.setItem('pool_status', '[]');
                render();
            }
        }

        window.onload = init;
    </script>
</body>
</html>